# Obsidian Todo Mac

一个macOS原生的Obsidian待办事项桌面小组件，用Swift和SwiftUI编写。

## ✨ 特性

### 🎯 核心功能
- **双模式界面**: 紧凑时间显示 (180×120) ⇄ 完整待办界面 (480×560)
- **实时时间显示**: 精确到秒的数字时钟
- **待办管理**: 完整的待办事项管理功能
- **Obsidian集成**: 直接读取和编辑Obsidian日记文件

### 🛠 技术特性
- **原生性能**: 内存占用 ~10MB，启动时间 <1秒
- **透明窗口**: 完全透明背景，仅显示内容
- **始终置顶**: 浮动在所有应用之上
- **拖拽移动**: 点击拖拽改变窗口位置
- **自动监控**: 实时监控文件变化并同步
- **智能检测**: 自动发现Obsidian仓库位置

### 📱 用户体验
- **鼠标悬停**: 自动展开/收缩界面
- **视图切换**: "今日" ⇄ "全部" 待办模式
- **文件选择器**: 原生macOS目录选择
- **键盘操作**: 支持回车快速添加待办

## 🚀 快速开始

### 系统要求
- macOS 13.0 或更高版本
- Xcode 15.0 或 Swift 5.9+

### 安装步骤

1. **克隆项目**
   ```bash
   git clone &lt;repository-url&gt;
   cd obsidian-todo-macos
   ```

2. **构建应用**
   ```bash
   ./build.sh
   ```

3. **运行应用**
   ```bash
   ./.build/ObsidianTodoMac
   ```

### 使用方法

1. **首次启动**: 应用会自动搜索常见的Obsidian仓库位置
2. **设置目录**: 点击 📁 按钮选择你的Obsidian仓库目录
3. **悬停展开**: 鼠标悬停在时间组件上自动展开为待办界面
4. **管理待办**: 
   - 勾选/取消勾选完成状态
   - 输入新待办并按回车或点击"添加"
   - 切换"今日"/"全部"视图
5. **拖拽移动**: 在时间模式下点击拖拽移动位置

## 📋 功能对比

| 功能 | Tauri版本 | macOS原生版本 |
|------|-----------|---------------|
| 内存占用 | ~50MB | ~10MB |
| 启动时间 | ~3秒 | &lt;1秒 |
| 文件体积 | ~15MB | ~2MB |
| 系统集成 | 有限 | 完整 |
| 性能 | 良好 | 优秀 |

## 🏗 项目结构

```
Sources/
├── App.swift                 # 应用入口和窗口配置
├── ContentView.swift         # 主界面和交互逻辑
├── WindowController.swift    # 窗口管理器
├── TodoViewModel.swift       # 数据模型和业务逻辑
├── ObsidianParser.swift      # Markdown解析器
└── Models.swift             # 数据结构定义
```

## 🔧 配置

应用配置存储在：
```
~/Library/Application Support/ObsidianTodoMac/vault_path.txt
```

## 📝 支持的Markdown格式

应用专门解析Obsidian日记文件中的"### 重点事项"部分：

```markdown
2024-08-22

### 重点事项
- [ ] 未完成的待办
- [x] 已完成的待办
- [ ] 另一个待办

### 其他内容
这部分不会被解析
```

## 🐛 故障排除

### 常见问题

1. **找不到Obsidian仓库**
   - 手动设置正确的仓库路径
   - 确保目录包含.md文件

2. **待办不显示**
   - 确保日记文件包含"### 重点事项"部分
   - 检查待办格式：`- [ ] 内容` 或 `- [x] 内容`

3. **文件监控不工作**
   - 重启应用
   - 检查文件权限

### 性能优化

- 应用使用懒加载和文件监控减少资源消耗
- 自动管理内存，无需手动优化
- 文件变更时增量更新，不重新加载整个界面

## 🛣 开发路线图

- [ ] App Store发布版本
- [ ] 自定义主题支持
- [ ] 多仓库支持
- [ ] 快捷键支持
- [ ] 通知提醒功能
- [ ] 待办统计面板

## 📄 许可证

本项目基于 MIT 许可证开源。

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

---

**从 Tauri 到 macOS 原生的完整迁移，享受更好的性能和用户体验！** 🚀